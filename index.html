<!DOCTYPE html>
<html>
<head>
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>å…·åè¡¨æ±ºå™¨</title>
Â  Â  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
Â  Â  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
Â  Â  <style>
Â  Â  Â  Â  body { margin: 0; font-family: sans-serif; text-align: center; background: #f4f4f9; }
Â  Â  Â  Â  .btn-container { display: flex; height: 50vh; }
Â  Â  Â  Â  .btn { flex: 1; display: flex; align-items: center; justify-content: center; color: white; font-size: 2.5rem; cursor: pointer; border: none; }
Â  Â  Â  Â  .pro { background: #28a745; }
Â  Â  Â  Â  .con { background: #dc3545; }
Â  Â  Â  Â  .result-section { padding: 20px; }
Â  Â  Â  Â  .vote-list { text-align: left; max-width: 500px; margin: 20px auto; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
Â  Â  Â  Â  .vote-item { padding: 8px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; }
Â  Â  Â  Â  .tag { padding: 2px 8px; border-radius: 4px; color: white; font-size: 0.8rem; }
Â  Â  </style>
</head>
<body>

Â  Â  <div class="btn-container">
Â  Â  Â  Â  <button class="btn pro" onclick="submitVote('è´Šæˆ')">ğŸ‘ è´Šæˆ</button>
Â  Â  Â  Â  <button class="btn con" onclick="submitVote('åå°')">ğŸ‘ åå°</button>
Â  Â  </div>

Â  Â  <div class="result-section">
Â  Â  Â  Â  <h2 id="total-text">ç¸½ç¥¨æ•¸ï¼š0 ç¥¨</h2>
Â  Â  Â  Â  <div class="vote-list" id="vote-list">
Â  Â  Â  Â  Â  Â  <strong>æŠ•ç¥¨æ˜ç´°ï¼š</strong>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  const firebaseConfig = {
Â  apiKey: "AIzaSyDvS-8vOwps8G3QgsM34qTh80pUiEPzZ0E",
Â  authDomain: "cssc-vote-app.firebaseapp.com",
Â  databaseURL: "https://cssc-vote-app-default-rtdb.asia-southeast1.firebasedatabase.app",
Â  projectId: "cssc-vote-app",
Â  storageBucket: "cssc-vote-app.firebasestorage.app",
Â  messagingSenderId: "648023885211",
Â  appId: "1:648023885211:web:29516cc3f95b00f58d4d3e",
Â  measurementId: "G-66EHDRFVTR"
Â  Â  Â  Â  };
Â  Â  Â  Â  firebase.initializeApp(firebaseConfig);
Â  Â  Â  Â  const db = firebase.database().ref('detailed_votes');

Â  Â  Â  Â  function submitVote(choice) {
Â  Â  Â  Â  Â  Â  if(localStorage.getItem('voted_name')) {
Â  Â  Â  Â  Â  Â  Â  Â  alert("ä½ å·²ç¶“æŠ•éç¥¨äº†ï¼");
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  let name = prompt("è«‹è¼¸å…¥æ‚¨çš„å§“åä»¥é€²è¡ŒæŠ•ç¥¨ï¼š");
Â  Â  Â  Â  Â  Â  if (!name || name.trim() === "") {
Â  Â  Â  Â  Â  Â  Â  Â  alert("å¿…é ˆè¼¸å…¥å§“åæ‰èƒ½æŠ•ç¥¨å–”ï¼");
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // å°‡å§“åèˆ‡é¸æ“‡å­˜å…¥é›²ç«¯
Â  Â  Â  Â  Â  Â  db.push({
Â  Â  Â  Â  Â  Â  Â  Â  name: name,
Â  Â  Â  Â  Â  Â  Â  Â  choice: choice,
Â  Â  Â  Â  Â  Â  Â  Â  timestamp: Date.now()
Â  Â  Â  Â  Â  Â  }).then(() => {
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('voted_name', name);
Â  Â  Â  Â  Â  Â  Â  Â  alert("æŠ•ç¥¨æˆåŠŸï¼");
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // ç›£è½ä¸¦é¡¯ç¤ºçµæœ
Â  Â  Â  Â  db.on('value', (snapshot) => {
Â  Â  Â  Â  Â  Â  const listDiv = document.getElementById('vote-list');
Â  Â  Â  Â  Â  Â  listDiv.innerHTML = "<strong>æŠ•ç¥¨æ˜ç´°ï¼š</strong>";
Â  Â  Â  Â  Â  Â  let count = 0;

Â  Â  Â  Â  Â  Â  snapshot.forEach((childSnapshot) => {
Â  Â  Â  Â  Â  Â  Â  Â  const data = childSnapshot.val();
Â  Â  Â  Â  Â  Â  Â  Â  count++;
Â  Â  Â  Â  Â  Â  Â  Â  const color = data.choice === 'è´Šæˆ' ? '#28a745' : '#dc3545';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  listDiv.innerHTML += `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="vote-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>${data.name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="tag" style="background:${color}">${data.choice}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.getElementById('total-text').innerText = `ç¸½ç¥¨æ•¸ï¼š${count} ç¥¨`;
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
